<!-- Terminal Component -->
<div class="terminal-container">
  <!-- Terminal Body -->
  <div class="terminal-body" #terminalBody>
    <!-- Command History -->
    <div class="command-history">
      <div 
        *ngFor="let cmd of commandHistory" 
        class="command-entry"
        [ngClass]="{'command': cmd.type === 'command', 'output': cmd.type === 'output', 'error': cmd.type === 'error'}">
        
        <!-- Command Line -->
        <div *ngIf="cmd.command" class="command-line">
          <pre>{{ cmd.command }}</pre>
        </div>
        
        <!-- Output -->
        <div *ngIf="cmd.output" class="output-line">
          <pre [innerHTML]="formatOutput(cmd.output)"></pre>
        </div>
      </div>
    </div>

    <!-- Process Running Indicator -->
    <div *ngIf="isExecuting" class="process-indicator">
      <span class="blinking-cursor">█</span>
    </div>

    <!-- Current Input Line - Only show when not executing and connected -->
    <div class="input-line" *ngIf="!isExecuting && isConnected">
      <div class="prompt-line">
        <span class="prompt">┌──(kali㉿{{ userName }})-[{{ currentDirectory }}]</span>
      </div>
      <div class="command-line">
        <span class="prompt-symbol">└─$ </span>
        <input 
          #commandInput
          type="text" 
          class="command-input"
          [(ngModel)]="currentCommand"
          (keydown)="onKeyDown($event)"
          (keyup)="onKeyUp($event)"
          placeholder=""
          autocomplete="off"
          spellcheck="false">
      </div>
    </div>

    <!-- Disconnected State -->
    <div *ngIf="!isExecuting && !isConnected" class="disconnected-line">
      <div class="prompt-line">
        <span class="prompt text-red">┌──(disconnected)-[{{ currentDirectory }}]</span>
      </div>
      <div class="command-line">
        <span class="prompt-symbol text-red">└─$ </span>
        <span class="text-red">Not connected to server. Use reconnect button to retry.</span>
      </div>
    </div>
  </div>

  <!-- Command Suggestions -->
  <div class="command-suggestions" *ngIf="showSuggestions && suggestions.length > 0">
    <div class="suggestions-header">Command Suggestions:</div>
    <div 
      *ngFor="let suggestion of suggestions; let i = index" 
      class="suggestion-item"
      [class.active]="i === selectedSuggestionIndex"
      (click)="selectSuggestion(suggestion)"
      (mouseenter)="selectedSuggestionIndex = i">
      <span class="suggestion-command">{{ suggestion.command }}</span>
      <span class="suggestion-description">{{ suggestion.description }}</span>
    </div>
  </div>




</div>